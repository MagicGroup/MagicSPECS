autofs-5.1.0 - make service want network-online

From: Ian Kent <ikent@redhat.com>

autofs often fails to start properly in Fedora with recent systemd.

Changing the systemd unit to Want the network-online target works
around this.

I'm not sure if this will cause problems for people that use file
maps and expect autofs to start without the network up but I hope
that's a small minority, if there are any at all.
---
 CHANGELOG                 |    1 +
 samples/autofs.service.in |    3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/CHANGELOG b/CHANGELOG
index d09567a..9b8de1c 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -40,6 +40,7 @@
 - make negative cache update consistent for all lookup modules.
 - ensure negative cache isn't updated on remount.
 - dont add wildcard to negative cache.
+- make service want network-online.
 
 04/06/2014 autofs-5.1.0
 =======================
diff --git a/samples/autofs.service.in b/samples/autofs.service.in
index 777463d..d4de6ff 100644
--- a/samples/autofs.service.in
+++ b/samples/autofs.service.in
@@ -1,6 +1,7 @@
 [Unit]
 Description=Automounts filesystems on demand
-After=network.target ypbind.service sssd.service
+After=network.target ypbind.service sssd.service network-online.target
+Wants=network-online.target
 
 [Service]
 Type=forking
