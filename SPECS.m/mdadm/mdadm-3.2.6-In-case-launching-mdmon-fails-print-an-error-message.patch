From 15c10423aa9435ed72bd292fecca69224a20fdc8 Mon Sep 17 00:00:00 2001
From: Jes Sorensen <Jes.Sorensen@redhat.com>
Date: Fri, 1 Feb 2013 16:15:19 +0100
Subject: [PATCH 3/4] In case launching mdmon fails, print an error message
 before exiting

Signed-off-by: Jes Sorensen <Jes.Sorensen@redhat.com>
Signed-off-by: NeilBrown <neilb@suse.de>
---
 util.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/util.c b/util.c
index 01af0b5..8817a3e 100644
--- a/util.c
+++ b/util.c
@@ -1709,8 +1709,11 @@ int start_mdmon(int devnum)
 		return -1;
 	default: /* parent - good */
 		pid = wait(&status);
-		if (pid < 0 || status != 0)
+		if (pid < 0 || status != 0) {
+			fprintf(stderr, Name "failed to launch mdmon. "
+			       "Array remains readonly\n");
 			return -1;
+		}
 	}
 	return 0;
 }
-- 
1.7.11.7

