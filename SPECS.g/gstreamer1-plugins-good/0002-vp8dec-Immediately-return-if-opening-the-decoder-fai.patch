From f0640f205cca974ccbe0550e76ab37f16b7c8821 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Sebastian=20Dr=C3=B6ge?= <sebastian.droege@collabora.co.uk>
Date: Fri, 2 Nov 2012 09:34:25 +0100
Subject: [PATCH 2/2] vp8dec: Immediately return if opening the decoder failed

Instead of ignoring any errors.
---
 ext/vpx/gstvp8dec.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/ext/vpx/gstvp8dec.c b/ext/vpx/gstvp8dec.c
index 7dcd75b..b5b4aa3 100644
--- a/ext/vpx/gstvp8dec.c
+++ b/ext/vpx/gstvp8dec.c
@@ -487,6 +487,8 @@ gst_vp8_dec_handle_frame (GstVideoDecoder * decoder, GstVideoCodecFrame * frame)
     ret = open_codec (dec, frame);
     if (ret == GST_FLOW_CUSTOM_SUCCESS_1)
       return GST_FLOW_OK;
+    else if (ret != GST_FLOW_OK)
+      return ret;
   }
 
   deadline = gst_video_decoder_get_max_decode_time (decoder, frame);
-- 
1.7.12.1

