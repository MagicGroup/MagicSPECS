From a6ef9d566bbcb816469cb5e7f79d51cf44a02984 Mon Sep 17 00:00:00 2001
From: Dawit Alemayehu <adawit@kde.org>
Date: Wed, 26 Sep 2012 18:14:17 -0400
Subject: [PATCH 4/7] Fix search shortcuts.

BUG: 307394
FIXED-IN: 1.3.1
---
 src/kwebkitpart.cpp | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

diff --git a/src/kwebkitpart.cpp b/src/kwebkitpart.cpp
index 1d4cbcb..dd15bbe 100644
--- a/src/kwebkitpart.cpp
+++ b/src/kwebkitpart.cpp
@@ -246,11 +246,6 @@ void KWebKitPart::initActions()
     action = actionCollection()->addAction(KStandardAction::Find, "find", this, SLOT(slotShowSearchBar()));
     action->setWhatsThis(i18nc("find action \"whats this\" text", "<h3>Find text</h3>"
                               "Shows a dialog that allows you to find text on the displayed page."));
-
-    action = actionCollection()->addAction(KStandardAction::FindNext, "findnext",
-                                           m_searchBar, SLOT(findNext()));
-    action = actionCollection()->addAction(KStandardAction::FindPrev, "findprev",
-                                           m_searchBar, SLOT(findPrevious()));
 }
 
 void KWebKitPart::updateActions()
@@ -757,6 +752,12 @@ void KWebKitPart::slotShowSearchBar()
         m_searchBar = new KDEPrivate::SearchBar(widget());
         connect(m_searchBar, SIGNAL(searchTextChanged(QString,bool)),
                 this, SLOT(slotSearchForText(QString,bool)));
+
+        actionCollection()->addAction(KStandardAction::FindNext, "findnext",
+                                      m_searchBar, SLOT(findNext()));
+        actionCollection()->addAction(KStandardAction::FindPrev, "findprev",
+                                      m_searchBar, SLOT(findPrevious()));
+
         QBoxLayout* lay = qobject_cast<QBoxLayout*>(widget()->layout());
         if (lay) {
           lay->addWidget(m_searchBar);
-- 
1.7.12.1

